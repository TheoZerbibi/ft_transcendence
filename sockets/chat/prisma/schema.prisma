generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model channel_messages {
  id              Int           @id @default(autoincrement())
  content         String
  created_at      DateTime      @default(now())
  channel_user_id Int
  channel_users   channel_users @relation(fields: [channel_user_id], references: [id], onDelete: Cascade)
}

model channel_users {
<<<<<<< HEAD
<<<<<<< HEAD
  id               Int                @id @default(autoincrement())
=======
  id               Int                @id(map: "channel_users_pk") @default(autoincrement())
>>>>>>> c80165e (fix: github issue)
=======
  id               Int                @id @default(autoincrement())
>>>>>>> 11fb8d1 (fix: Fix for rebase)
  channel_id       Int
  user_id          Int
  is_muted         DateTime?
  is_owner         Boolean            @default(false)
  is_admin         Boolean            @default(false)
  is_ban           Boolean            @default(false)
  created_at       DateTime           @default(now())
  channel_messages channel_messages[]
  channels         channels           @relation(fields: [channel_id], references: [id], onDelete: Cascade)
  users            users              @relation(fields: [user_id], references: [id], onDelete: Cascade)

<<<<<<< HEAD
<<<<<<< HEAD
  @@unique([channel_id, user_id])
=======
  @@unique([channel_id, user_id], map: "channel_users_channel_id_user_id_uindex")
>>>>>>> c80165e (fix: github issue)
=======
  @@unique([channel_id, user_id])
>>>>>>> 11fb8d1 (fix: Fix for rebase)
}

model channels {
  id            Int             @id @default(autoincrement())
<<<<<<< HEAD
<<<<<<< HEAD
  name          String          @unique
=======
  name          String
>>>>>>> c80165e (fix: github issue)
=======
  name          String          @unique
>>>>>>> 11fb8d1 (fix: Fix for rebase)
  public        Boolean         @default(true)
  password      String?
  created_at    DateTime        @default(now())
  updated_at    DateTime        @default(now())
  channel_users channel_users[]
}

model friends {
  user_id                        Int
  friend_id                      Int
  users_friends_friend_idTousers users @relation("friends_friend_idTousers", fields: [friend_id], references: [id])
  users_friends_user_idTousers   users @relation("friends_user_idTousers", fields: [user_id], references: [id])

  @@id([user_id, friend_id])
}

model games {
  id           Int            @id @unique @default(autoincrement())
  uid          String         @unique
  is_private   Boolean        @default(false)
  created_at   DateTime       @default(now())
  started_at   DateTime?
  end_at       DateTime?
  game_players game_players[]
}

model users {
<<<<<<< HEAD
<<<<<<< HEAD
  id                                   Int               @id @default(autoincrement())
  login                                String            @unique
  display_name                         String
  email                                String
  dAuth                                Boolean           @default(false)
  avatar                               String
  created_at                           DateTime          @default(now())
  updated_at                           DateTime
  last_login                           DateTime          @default(now())
  blocked_blocked_blocked_by_idTousers blocked[]         @relation("blocked_blocked_by_idTousers")
  blocked_blocked_blocked_idTousers    blocked[]         @relation("blocked_blocked_idTousers")
  channel_users                        channel_users[]
  direct_messages                      direct_messages[]
  friends_friends_friend_idTousers     friends[]         @relation("friends_friend_idTousers")
  friends_friends_user_idTousers       friends[]         @relation("friends_user_idTousers")
  game_players                         game_players[]
}

model game_players {
  player_id Int
  game_id   Int
  is_win    Boolean?
  is_spec   Boolean?
  games     games    @relation(fields: [game_id], references: [id], onDelete: Cascade)
  users     users    @relation(fields: [player_id], references: [id])

  @@id([player_id, game_id])
}

model blocked {
  blocked_id                         Int
  blocked_by_id                      Int
  users_blocked_blocked_by_idTousers users @relation("blocked_blocked_by_idTousers", fields: [blocked_by_id], references: [id])
  users_blocked_blocked_idTousers    users @relation("blocked_blocked_idTousers", fields: [blocked_id], references: [id])

  @@id([blocked_by_id, blocked_id])
}

model direct_messages {
  id         Int      @id @default(autoincrement())
  content    String
  created_at DateTime @default(now())
  friend_id  Int
  user_id    Int
  users      users    @relation(fields: [user_id], references: [id], onDelete: Cascade)
}
=======
=======
>>>>>>> c80165e (fix: github issue)
  id                               Int             @id @default(autoincrement())
  login                            String          @unique
  display_name                     String
  email                            String
  dAuth                            Boolean         @default(false)
  avatar                           String
  created_at                       DateTime        @default(now())
  updated_at                       DateTime
  last_login                       DateTime        @default(now())
  channel_users                    channel_users[]
  friends_friends_friend_idTousers friends[]       @relation("friends_friend_idTousers")
  friends_friends_user_idTousers   friends[]       @relation("friends_user_idTousers")
  game_players                     game_players[]
}

<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
/// We could not retrieve columns for the underlying table. Either it has none or you are missing rights to see them. Please check your privileges.
// model gamePlayers {
// }
>>>>>>> 977750d (chore: Fix prisma.schema)
=======
=======
>>>>>>> 6c47f89 (suite tuto to fix)
=======
>>>>>>> c80165e (fix: github issue)
model game_players {
  player_id Int
  game_id   Int
  is_win    Boolean?
  is_spec   Boolean?
  score     Int      @default(0)
  games     games    @relation(fields: [game_id], references: [id], onDelete: Cascade)
  users     users    @relation(fields: [player_id], references: [id])

  @@id([player_id, game_id])
}
<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> 8ad44c4 (chore: Fix prisma.schema)
=======
/// We could not retrieve columns for the underlying table. Either it has none or you are missing rights to see them. Please check your privileges.
// model gamePlayers {
// }
>>>>>>> 89e81b3 (ca marche sur mon ordi en plein festival ou on me sort que je suis une sorciere blanche ahaha alors que je suis de l;'akatsuki mdr)
=======
>>>>>>> 6c47f89 (suite tuto to fix)
=======
>>>>>>> c80165e (fix: github issue)
