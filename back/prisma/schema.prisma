// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
	provider	= "prisma-client-js"
}

generator dbml {
  provider   = "prisma-dbml-generator"
  output     = "./dbml"
  outputName = "transcendence.dbml"
  projectName = "Transcendence"
  projectDatabaseType = "PostgreSQL"
  projectNote = "Transcendence DBML file"
}

datasource db {
	provider	= "postgresql"
	url			= env("DATABASE_URL")
}
// model Game {
// 	id			Int	@id @default(autoincrement()) @unique
// 	uid			String	@unique
// 	player1		User @relation(fields: [playerId1], references: [id])
// 	player2		User @relation(fields: [playerId2], references: [id])
// 	winner		User? @relation(fields: [winnerId], references: [id])
// 	createdAt	DateTime @default(now())
// 	startedAt	DateTime?
// 	endAt		DateTime?

// 	@@map("games")
// }

model Game {
	id			Int	@id @default(autoincrement()) @unique
	uid			String	@unique
	createdAt	DateTime @default(now())
	startedAt	DateTime?
	endAt		DateTime?
	gamePlayer 	GamePlayer[]

	@@map("games")
}

model GamePlayer {
	playerId	Int
	gameId		Int
	isWin		Boolean?
	isSpec		Boolean?
	player		User	@relation(fields: [playerId], references: [id])
	game		Game	@relation(fields: [gameId], references: [id])

	@@id([playerId, gameId])
	@@map("gamePlayers")
}
model User {
	id			Int	@id @default(autoincrement()) @unique
	login		String @unique
	displayName	String
	email		String
	dAuth		Boolean @default(false)
	avatar		String
	createdAt	DateTime @default(now())
	updatedAt	DateTime @updatedAt
	lastLogin	DateTime @default(now())
	GamePlayer 	GamePlayer[]

	@@map("users")
}
