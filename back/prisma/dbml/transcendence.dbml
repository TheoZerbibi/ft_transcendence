//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Project "Transcendence" {
  database_type: 'PostgreSQL'
  Note: 'Transcendence DBML file'
}

Table games {
  id Int [pk, increment]
  uid String [unique, not null]
  is_private Boolean [not null, default: false]
  created_at DateTime [default: `now()`, not null]
  started_at DateTime
  end_at DateTime
  gamePlayer gamePlayers [not null]
}

Table gamePlayers {
  player_id Int [not null]
  game_id Int [not null]
  is_win Boolean
  is_spec Boolean
  player users [not null]
  game games [not null]

  indexes {
    (player_id, game_id) [pk]
  }
}

Table users {
  id Int [pk, increment]
  login String [unique, not null]
  display_name String [not null]
  email String [not null]
  dAuth Boolean [not null, default: false]
  avatar String [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  last_login DateTime [default: `now()`, not null]
  GamePlayer gamePlayers [not null]
}

Ref: gamePlayers.player_id > users.id

Ref: gamePlayers.game_id > games.id [delete: Cascade]