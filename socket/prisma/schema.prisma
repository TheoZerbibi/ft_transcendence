generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id            Int             @id @default(autoincrement())
  login         String          @unique
  email         String
  dAuth         Boolean         @default(false)
  avatar        String
  created_at    DateTime        @default(now())
  display_name  String
  updated_at    DateTime
  last_login    DateTime        @default(now())
  channel_users channel_users[]
}

<<<<<<< HEAD
=======
model channels {
  id            Int             @id @default(autoincrement())
  name          String
  public        Boolean         @default(true)
  password      String?
  created_at    DateTime        @default(now())
  update_at     DateTime        @default(now())
  channel_users channel_users[]
}

>>>>>>> 8d69780cc884219d5d873e1dc882667efcde88fe
model channel_messages {
  id            Int           @id @default(autoincrement())
  user_id       Int
  channel_id    Int
  content       String
  created_at    DateTime      @default(now())
  channel_users channel_users @relation(fields: [user_id, channel_id], references: [user_id, channel_id], onDelete: Cascade)
}

model channel_users {
  channel_id       Int
  user_id          Int
  is_muted         DateTime?
  is_owner         Boolean            @default(false)
  is_admin         Boolean            @default(false)
  is_ban           Boolean            @default(false)
  channel_messages channel_messages[]
  channels         channels           @relation(fields: [channel_id], references: [id], onDelete: Cascade)
  users            users              @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@id([user_id, channel_id])
<<<<<<< HEAD
}

model channels {
  id            Int             @id @default(autoincrement())
  name          String
  public        Boolean         @default(true)
  password      String?
  created_at    DateTime        @default(now())
  update_at     DateTime        @default(now())
  channel_users channel_users[]
=======
>>>>>>> 8d69780cc884219d5d873e1dc882667efcde88fe
}
